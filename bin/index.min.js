"use strict";function combine(array,values){var index=void 0;for(array=array.concat([]);(index=array.indexOf(void 0))!==-1&&values.length>0;)array[index]=values.shift();return array.concat(values)}function curry$(method){function transform(params){var context=void 0;return function(){for(var _len=arguments.length,input=Array(_len),_key=0;_key<_len;_key++)input[_key]=arguments[_key];var args=combine(params,array$(arguments));return context=context||this,args.length<method.length||args.some(function(it){return void 0===it})?transform(args):method.apply(context,args)}}return method.length<=1?method:transform([])}function negated$(it){return function(){return!it.apply(this,arguments)}}function pair(object){return Object.keys(object).map(function(key){return{key:key,value:object[key]}})}function flatten(array){var isArray=void 0,toArray$$1=void 0,fromArray=void 0;for(isArray=function(it){return it.constructor===Array},toArray$$1=function(it){return isArray(it)?it:[it]},fromArray=function(a,b){return a.concat(b)};array.some(isArray);)array=array.map(toArray$$1).reduce(fromArray);return array}function equals(reference,object){return("undefined"==typeof reference?"undefined":_typeof(reference))===("undefined"==typeof object?"undefined":_typeof(object))&&reference.constructor===object.constructor&&(reference.constructor!==Object?reference===object:flatten([pair(reference),pair(object)]).every(function(item){}))}function exists(it){return void 0!==it&&null!==it}function attempt(mutation,subject){var parameters=void 0,alternative=void 0,response=void 0;return parameters=array$(arguments).slice(1),alternative=1===parameters.length?parameters[0]:parameters,response=mutation.apply(this,parameters),response||alternative}function inject(it,transform){function cycle(key,value){return value!==copy&&("function"==typeof value?attempt(transform,value):"object"===("undefined"==typeof value?"undefined":_typeof(value))?inject(value,transform):void 0)}var copy={};for(var key in it)copy[key]=cycle(key,it[key]);return copy}function prepare(it){var not=void 0,tmp=void 0;return not=inject(it,negated$),not=inject(not,curry$),tmp=inject(it,curry$),tmp.not=not,tmp}function decompose(array,initial){var composer=function(previous,current){return attempt(current,previous)},reducer=function(it){return array.reduce(composer,initial||it)};return initial?reducer(initial):reducer}function configure(it){return{host:it.host,port:it.port,path:"https://api.ipify.org?format=json",headers:{Host:"https://api.ipify.org?format=json"},agent:!1}}var program=require("commander"),chalk=require("chalk"),fs=require("fs"),path=require("path"),http=require("http"),cluster=require("cluster"),readline=require("readline"),version="1.0.0",description="Proxy Test Tool for checking your proxies",_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),array$=function(it){return Array.prototype.slice.call(it,0)},has=curry$(function(object,property){return object.hasOwnProperty(property)}),is$={element:function(object){return object.nodeType===document.ELEMENT_NODE},fragment:function(object){return object.nodeType===document.DOCUMENT_FRAGMENT_NODE},text:function(object){return object.nodeType===document.TEXT_NODE},equal:equals,existant:exists};is$=prepare(is$);var Compare=function(){function Compare(reference){classCallCheck(this,Compare),this.reference=reference}return createClass(Compare,[{key:"element",value:function(object){var result=void 0,isElementNode=function(it){return it.nodeType===document.ELEMENT_NODE};return result=isElementNode(object),result===!this.reference.polarity}},{key:"fragment",value:function(object){var result=void 0,isDocumentFragmentNode=function(it){return it.nodeType===document.DOCUMENT_FRAGMENT_NODE};return result=isDocumentFragmentNode(object),result===!this.reference.polarity}},{key:"text",value:function(object){var isTextNode=function(it){return object.nodeType===document.TEXT_NODE};return result=isTextNode(object),result===!this.reference.polarity}},{key:"equals",value:function(object,$reference){}},{key:"existant",value:function(object){}}]),Compare}(),as={array:array$,pair:pair,method:curry$,flatten:flatten,decomposed:decompose,attempt:attempt},decode=function(it){return{host:it.match(/^[^:]+/m)[0],port:parseInt(it.match(/\d+$/m)[0],10)}},encoding="utf8",config={encoding:encoding};cluster.isMaster&&!function(){program.usage("-5 --file ../proxies.txt").version(version).description(description).option("-f, --file <input>","Parse an input file line by line").option("-5, --socks5","Test for SOCKet Secure Layer 5").option("-4, --socks4","Test for SOCKet Secure Layer 4").option("-j, --threads","Number of threads/clusters to run on").parse(process.argv);var fromFileSystem=function(){if(!program.file)return!1;var realPath=path.resolve(program.file),readStream=fs.createReadStream(realPath,config);return readStream},input=as.decomposed([fromFileSystem],process.stdin),rl=readline.createInterface({input:input}),Runner=function(){function Runner(callback){classCallCheck(this,Runner),this.callback=callback,this.running=0,this.queue=[]}return createClass(Runner,[{key:"initialize",value:function(){var self=this;if(0===this.queue.length)return!1;if(this.running>0)return!1;this.running++;var item=this.queue.shift(),worker=cluster.fork();worker.send(item),worker.on("exit",function(){self.running--,self.initialize()})}},{key:"provide",value:function(information){this.queue.push(information),this.initialize()}}]),Runner}(),runner=new Runner(function(it){});rl.on("line",function(it){return runner.provide(it)})}(),cluster.isWorker&&process.on("message",function(message){var options=configure(decode(message));http.get(options,function(response){process.stdout.write(chalk.yellow(message));var contentType=(response.statusCode,response.headers["content-type"]),raw="";process.stdout.write(" headers..."),200!==response.statusCode&&(console.log("bad status code"),process.exit(0)),/^(text|application)\/json/.test(contentType)||(console.log("bad content-type"),process.exit(0)),process.stdout.write(" data"),response.setEncoding(encoding),response.on("data",function(data){process.stdout.write("."),raw+=data}),response.on("end",function(){try{var parsed=JSON.parse(raw);console.log(JSON.stringify(parsed,null,2))}catch(ex){console.log(ex.toString())}finally{process.exit(0)}}),response.on("error",function(error){console.log(error),process.exit(0)})})});
//# sourceMappingURL=bin/index.min.js.map